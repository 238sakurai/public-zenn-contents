---
title: "gwqã§git worktreeãŒä½¿ã„ã‚„ã™ããªã£ãŸ"
emoji: "ğŸŒ²"
type: "tech"
topics: ["git", "worktree", "gwq", "cli", "ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³"]
published: false
published_at: 2025-12-30 22:00
---

## ãã£ã‹ã‘

ç¤¾å†…ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ–ãƒ­ã‚°ã‚’èª­ã‚“ã§ `gwq` ã‚’çŸ¥ã£ãŸã€‚

@[card](https://zenn.dev/dress_code/articles/89a5ceaa6eac37)

`git worktree` ã¯ä¾¿åˆ©ãã†ã ã¨æ€ã£ã¦ã„ãŸãŒã€ã‚³ãƒãƒ³ãƒ‰ãŒé•·ãã¦æ‰‹ãŒä¼¸ã³ãªã‹ã£ãŸã€‚gwqãªã‚‰ã‚·ãƒ³ãƒ—ãƒ«ã«ä½¿ãˆãã†ã€‚

## git worktreeã¨ã¯

è¤‡æ•°ã®ãƒ–ãƒ©ãƒ³ãƒã‚’åŒæ™‚ã«åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä½œæ¥­ã§ãã‚‹æ©Ÿèƒ½ã€‚

é€šå¸¸ã¯ `git stash` â†’ `git checkout` â†’ ä½œæ¥­ â†’ æˆ»ã‚‹ã€ã®ç¹°ã‚Šè¿”ã—ãŒå¿…è¦ã€‚worktreeãªã‚‰å„ãƒ–ãƒ©ãƒ³ãƒãŒç‹¬ç«‹ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãªã‚‹ã®ã§ã€stashä¸è¦ã§ãƒ–ãƒ©ãƒ³ãƒé–“ã‚’è¡Œãæ¥ã§ãã‚‹ã€‚

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ãªãŒã‚‰è‡ªåˆ†ã®ä½œæ¥­ã‚‚é€²ã‚ãŸã„æ™‚ã«ä¾¿åˆ©ã€‚

## ç´ ã®worktreeã‚³ãƒãƒ³ãƒ‰ã®å•é¡Œ

```bash
git worktree add ./worktree/feature-issue-123 feature/issue-123
```

ãƒ‘ã‚¹ã¨ãƒ–ãƒ©ãƒ³ãƒåã‚’ä¸¡æ–¹æŒ‡å®šã™ã‚‹ã®ãŒé¢å€’ã€‚ã—ã‹ã‚‚ãƒ‘ã‚¹ãŒå…ˆã€‚ãƒ–ãƒ©ãƒ³ãƒåã‚’å…ˆã«è£œå®Œã—ãŸã„ã®ã«ã€‚

## gwqã¨ã¯

worktreeã®ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€‚ghqã®worktreeç‰ˆã¿ãŸã„ãªã‚„ã¤ã€‚

https://github.com/d-kuro/gwq

ghqã§ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ã€gwqã§worktreeç®¡ç†ã€ã¨ã„ã†æ£²ã¿åˆ†ã‘ãŒã§ãã‚‹ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Mac
brew install d-kuro/tap/gwq

# Go
go install github.com/d-kuro/gwq@latest
```

## åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

### worktreeä½œæˆ

```bash
gwq add <branch>                   # æ—¢å­˜ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰worktreeä½œæˆ
gwq add -i                         # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«é¸æŠ
gwq add -b <branch>                # æ–°è¦ãƒ–ãƒ©ãƒ³ãƒä½œæˆã—ã¦worktreeä½œæˆ
gwq add -b feature/new-task        # ä¾‹
```

ç´ ã®git worktreeã¨æ¯”ã¹ã¦ã‚·ãƒ³ãƒ—ãƒ«ã€‚ãƒ–ãƒ©ãƒ³ãƒåã ã‘æŒ‡å®šã™ã‚Œã°OKã€‚

### worktreeä¸€è¦§

```bash
gwq list                           # ä¸€è¦§è¡¨ç¤º
gwq status                         # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä»˜ãã§ä¸€è¦§è¡¨ç¤º
```

`gwq status` ã®å‡ºåŠ›ãŒè¦‹ã‚„ã™ã„ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BRANCH              â”‚ STATUS     â”‚ CHANGES     â”‚ ACTIVITY   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   develop           â”‚ up to date â”‚ -           â”‚ 3 mins ago â”‚
â”‚   feature/issue-123 â”‚ changed    â”‚ 2 untracked â”‚ just now   â”‚
â”‚   feature/issue-456 â”‚ up to date â”‚ -           â”‚ 1 min ago  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### worktreeã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

```bash
gwq exec <branch> -- <command>     # æŒ‡å®šworktreeã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
gwq exec feature/issue-123 -- npm run start    # ã‚¢ãƒ—ãƒªèµ·å‹•
gwq exec feature/issue-123 -- cursor .         # Cursorã§é–‹ã
gwq exec feature/issue-123 -- code .           # VS Codeã§é–‹ã
```

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ã›ãšã«ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã§ãã‚‹ã®ãŒä¾¿åˆ©ã€‚

### worktreeå‰Šé™¤

```bash
gwq remove                         # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«å‰Šé™¤
gwq remove <branch>                # æŒ‡å®šãƒ–ãƒ©ãƒ³ãƒã®worktreeå‰Šé™¤
gwq remove feature/issue-123       # ä¾‹
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•

```bash
gwq cd <branch>                    # worktreeãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
gwq cd feature/issue-123           # ä¾‹
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

gwqãŒè‡ªå‹•ã§ä½œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã€‚

```
~/worktree
â””â”€â”€ github.com
    â””â”€â”€ owner
        â””â”€â”€ repo
            â”œâ”€â”€ develop
            â”œâ”€â”€ feature-issue-123
            â””â”€â”€ feature-issue-456
```

ghqã¨åŒã˜ `host/owner/repo` ã®æ§‹æˆã€‚æƒã£ã¦ã„ã¦æ°—æŒã¡ã„ã„ã€‚

## å®Ÿéš›ã®ä½¿ã„æ–¹

**æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å§‹ã‚ã‚‹æ™‚**

```bash
gwq add -b feature/my-new-task
gwq exec feature/my-new-task -- cursor .
```

**ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ãŒæ¥ãŸæ™‚**

```bash
gh pr checkout 123 -b feature/pr-123
gwq add feature/pr-123
gwq exec feature/pr-123 -- cursor .
```

**å‹•ä½œç¢ºèªã—ãŸã„æ™‚**

```bash
gwq exec feature/pr-123 -- npm run start
```

## ghqã¨ã®çµ„ã¿åˆã‚ã›

```bash
# ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†
ghq get <repo>                     # ãƒªãƒã‚¸ãƒˆãƒªå–å¾—
ghq list                           # ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§

# worktreeç®¡ç†
gwq add <branch>                   # worktreeä½œæˆ
gwq list                           # worktreeä¸€è¦§
```

ä¼¼ãŸã‚³ãƒãƒ³ãƒ‰ä½“ç³»ã§è¦šãˆã‚„ã™ã„ã€‚

## æ„Ÿæƒ³

worktreeã®ä½¿ã„æ–¹ã‚‚ã¾ã ã¾ã ãƒ¨ãƒãƒ¨ãƒã—ã¦ã„ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ã®é•·ã•ãŒãƒãƒƒã‚¯ã«ãªã‚‹ã£ã¦ã„ã†ã®ã¯ã‚ã‹ã‚‹å¸Œã‚¬ã‚¹ã€‚

gwqã‚’ä½¿ã†ã¨ `gwq add <branch>` ã ã‘ã§worktreeãŒä½œã‚Œã‚‹ã€‚`gwq exec` ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ã›ãšã«ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã§ãã‚‹ã®ã‚‚è‰¯ã„ã€‚

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨è‡ªåˆ†ã®ä½œæ¥­ã‚’ä¸¦è¡Œã™ã‚‹å ´é¢ãŒå¤šã„ã®ã§ã€ã—ã°ã‚‰ãä½¿ã£ã¦ã¿ã‚‹ã€‚

## å‚è€ƒ

- https://github.com/d-kuro/gwq
- https://git-scm.com/docs/git-worktree
- https://zenn.dev/dress_code/articles/89a5ceaa6eac37

